<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program</title>
    <script src="script.js"></script>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/program.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body>
    <header class="header">
        <div class="logo">
            <img src="images/zoo.png" alt="Logo">
        </div>
        <div class="navigation_bar">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="animals.html">Our Animals</a></li>
                <li><a href="aboutUs.html">About us</a></li>
                <li><a href="contact-us.html">Contact us</a></li>
                <li><a href="help-page/help.html">Help</a></li>
            </ul>
            <div class="profile_icon_container">
                <span class="vertical_line"></span>
                <i id="userIcon" class="fa fa-user" aria-hidden="true"></i>

            </div>
        </div>
        <div class="icons">
            <div id="menu-btn" class="fas fa-bars"> </div>
            <div class="profile_icon_container-2">
                <i class="fa fa-user" aria-hidden="true"></i>

            </div>
        </div>
        <div class="sub-menu-wrap" id="subMenu">
            <div class="sub-menu">

                <a href="settings.html" class="sub-menu-link" id="settingsLink">
                    <img src="images/setting.png" alt="setting">
                    <p>Settings</p>
                    <span> > </span>
                </a>

                <a href="landingpage.html" class="sub-menu-link" id="logoutLink">
                    <img src="images/logout.png" alt="logout">
                    <p>Logout</p>
                    <span> > </span>
                </a>

            </div>
        </div>
    </header>
    <h1>Discover our program</h1>
    <div class="elements">
        <div class="program">
            <div class="round-rect-box">

                <p><strong>Monday:</strong> 8-20</p>
                <p><strong>Tuesday:</strong>8-20</p>
                <p><strong>Wednesday:</strong> 8-20</p>
                <p><strong>Thursday:</strong> 8-20</p>
                <p><strong>Friday:</strong> 8-20</p>
                <p><strong>Saturday:</strong> 9-18</p>
                <p><strong>Sunday:</strong> 10-16</p>
            </div>
        </div>
        <div class="zoo">
            <img src="images/zoo2.png" alt="zoo">
        </div>
    </div>
    <h2><span class="hline"></span>Visit Us <span class="hline"></span></h2>
    <div class="book-form">
        <div class="bf-all">
            <div class="bf-head">
                <h1>Book a ticket</h1>
                <p></p>
            </div>
            <form class="bf-body" action="/program" method="POST">
                <div class="line">
                    <div class="column">
                        <p>Name*</p>
                        <input type="text" name="full-name" id="fname" placeholder="Full Name">

                    </div>
                    <div class="column">
                        <p>Email address*</p>
                        <input type="email" name="email" id="email" placeholder="Your email address">

                    </div>
                </div>

                <div class="line">
                    <div class="column">
                        <p>Select date*</p>
                        <input type="date" name="date" id="date">

                    </div>
                    <div class="column">
                        <p>Number of tickets*</p>
                        <select name="sel">
                            <option>Select number</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>

                    </div>
                </div>

                <div class="line">
                    <div class="column-2">
                        <p>Message</p>
                        <textarea name="Message" id="mes" cols="50" rows="5" placeholder="Your Message"></textarea>

                    </div>

                </div>

                <div class="line">
                    <div class="column-3">
                        <input type="submit" value="Book tickets" class="send">

                    </div>

                </div>
            </form>

            <div id="alertBox" style="display: none;"></div>

        </div>
    </div>
    
    <div class="footer_section">
        <div class="section_1">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="animals.html">Our Animals</a></li>
                <li><a href="aboutUs.html">About us</a></li>
                <li><a href="contact-us.html">Contact us</a></li>
                <li><a href="help-page/help.html">Help</a></li>
            </ul>
        </div>
        <div class="section_2">
            <h4>Other Pages</h4>
            <ul>
                <li><a href="#privacy">Privacy & Policy</a></li>
                <li><a href="#terms">Terms of Use</a></li>
                <li><a href="#disclaimer">Disclaimer</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
        </div>
        <div class="section_3">
            <h4>Contact Info</h4>
            <ul>
                <li>Lorem ipsum dolor sit amet</li>
                <li>+1234567899</li>
                <li>contact@domain.com</li>
            </ul>
        </div>
        <div class="section_4">
            <h4>Make a Reservation</h4>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            <button type="button">+1234567899</button>
        </div>
    </div>
    <script>
        const form = document.querySelector('.bf-body');
        const formData = new URLSearchParams();

        const fullNameInput = form.querySelector('input[name="full-name"]');
        const emailInput = form.querySelector('input[name="email"]');
        const dateInput = form.querySelector('input[name="date"]');
        const numberOfTicketsInput = form.querySelector('select[name="sel"]');
        const messageInput = form.querySelector('textarea[name="Message"]');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const fullName = fullNameInput.value;
            const email = emailInput.value;
            const date = dateInput.value;
            const numberOfTickets = numberOfTicketsInput.value;
            const message = messageInput.value;

            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (!emailPattern.test(email)) {
                alert('Invalid email address!');
                emailInput.focus();
                event.preventDefault();
                return;
            }

            if (fullName.trim() === '') {
                alert('Please enter your full name.');
                fullNameInput.focus();
                return;
            }

            if (date.trim() === '') {
                alert('Please select a date.');
                dateInput.focus();
                return;
            }

            if (numberOfTickets === 'Select number') {
                alert('Please select the number of tickets.');
                numberOfTicketsInput.focus();
                return;
            }

            formData.append('full-name', fullName);
            formData.append('email', email);
            formData.append('date', date);
            formData.append('sel', numberOfTickets);
            formData.append('Message', message);

            try {
                const response = await fetch('/program', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: formData.toString(),
                });

                if (response.ok) {
                    alert('Reservation made successfully!');
                } else {
                    const data = await response.json();
                    const errorMessage = data.error;
                    alert(errorMessage);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            }
        });
    </script>
    <script>
        // Access the mode value from localStorage
        const mode = localStorage.getItem('mode');
        console.log('mode:', mode);
    </script>
    <script src="darkmode.js"></script>
</body>

</html>